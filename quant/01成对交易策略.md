**成对交易的思想**

比如某两家中间商他们是做服装的，那么他们的上游供应链是基本相同的，

比如一些纺织厂，给他们提供服装原料；并且他们的下游客户群也是基本相同的，

比如耐克阿迪；那么他们的整体业绩应该是相似的。

如果在股市中找到两支走势基本相似的股票，如果某只股票受利好刺激出现了上涨行情，但另一只还没有上涨，说明它滞后了，我们相信它最终会赶上行业的大趋势，这就是成对交易的基础想法。

从量化的角度而言，我们需要从历史角度来看这两只股票是符合我们的预期的。

下面我们用算法的思想来看看某两只股票是否有这种相似的关系。

基础概念：

1.**Timeseries-时间序列**：按照时间发生先后顺序排列的数据点序列

2.**Stationary-平稳过程**：在数学中又称为严格平稳，是一种特殊的随机过程，任取一段区间或空间的联合概率分布，与这段时间或空间任意平移后的新区间或空间的联合概率分布相等，这样参数的期望和方差不随时间或位置而变化，简单来说就是它是周期性的。比如，白噪声就是平稳过程，但是击锣的声音会随时间变化，因而击锣是非平稳的。

3.**Order of Integration**：I(0)代表时间序列的变化符合 ![[公式]](https://www.zhihu.com/equation?tex=%5Csum_%7Bi%3D0%7D%5E%7B%5Cinfty%7D%7B%5Cleft%7C++a_%7Bi%7D%5Cright%7C%5E2%7D%3C%5Cinfty) ，假设用移动平均模型来构建这个I(0)： ![[公式]](https://www.zhihu.com/equation?tex=x_%7Bt%7D%3D%5Cmu%2B%5Csum_%7Bi%3D0%7D%5E%7B%5Cinfty%7D%7Ba_%7Bi%7D%5Cvarepsilon_%7Bt-i%7D%7D) ，为了便于理解，可以认为I(0)的时间序列会在其均值附近波动，但不会偏离太多，所有的平稳过程都是I(0)，但I(0)不都是平稳的。I(d)代表对于 ![[公式]](https://www.zhihu.com/equation?tex=x_%7Bt%7D) ，如果反复计算d次 ![[公式]](https://www.zhihu.com/equation?tex=%5CDelta+x%28x_%7Bt%7D-x_%7Bt-1%7D%29) ，可得到一个平稳过程，比如振动单边上升就是这样。

4.**Correlation-相关**：表征两个随机变量之间线性关系的强度和方向。计算过程：将每个变量都转化为标准单位，乘积的平均数即为相关系数；两个变量的关系可以直观地用散点图表示，当其紧密地群聚于一条直线地周围时，变量间存在强相关。

散点图用五个统计量来概括：

- 所有x值的平均数
- 所有x值的标准差
- 所有y值的平均数
- 所有y值的标准差
- 相关系数r

将一个变量记为x，第二个变量记为y，相关系数为r，则可以通过公式r=[(以标准单位表示的x) x (以标准单位表示的y)]的平均数来表示。

![img](https://pic4.zhimg.com/80/v2-6cb2560fcf6cf2d8e46619fbe43590df_hd.jpg)

5.**Cointegration-协整**：指多个I(1)的时间序列通过线性组合，可以形成一个I(0)的时间序列。比如，x1，x2，x3是三个I(1)序列，以及x1+2*x2+0*x3=x1+2x2是I(0)，可以看出x1，x2，x3是协整关系。尽管x1，x2，x3的形状（走势）有多么不一样，但通过线性组合就可以形成一个I(0)的时间序列。

下面介绍一下如何利用上述指标来实现对冲（Hedging）收益。假设找到两个Cointegrated的股票作为主角：X和Y，根据定义，说明X和Y走势的某种时间序列不会变化地很大（围绕某一均值），换句话说，X和Y之间的距离基本是稳定的，不会走太远。那怎么赚钱呢？我们可以当X和Y价格分开得远时，选择做空Y同时做多X；当两价格相近时，选择做多Y同时做空X。

总的来说，当我们认为X和Y之间的价格距离目前太靠近了，应该会变大的时候，我们做多Y同时做空X；当我们认为X和Y之间的价格距离目前太远了，应该会变得更小的时候，我们做多X同时做空Y。这样做我们就会立于不败之地，因为我们希望把我们的赌注只压在一件事情上，那就是X和Y的某种经济联系，而不会受整个市场各种因素的影响。

上面所说的就是成对交易的思想，我们的策略步骤大致可以分为：

1. 在真实的市场里找到X和Y（最好的方式是挑两个我们认为会有Cointegration关系的股票，然后用统计算法测一下他们的Cointegration值）；
2. 计算spread，根据定义，已有的X和Y是I(1)，而他们的某种线性组合是I(0)的，那我们如何找出X和Y的这个线性组合呢？如果Xt和Yt是不平稳并且协整，那么 ![[公式]](https://www.zhihu.com/equation?tex=y_%7Bt%7D+-+%5Cbeta+x_%7Bt%7D%3D%5Cmu_%7Bt%7D) 中的 ![[公式]](https://www.zhihu.com/equation?tex=%5Cmu_%7Bt%7D) 一定是平稳的，用OLS（Ordinary Least Squares 最小二乘法）来估计出 ![[公式]](https://www.zhihu.com/equation?tex=%5Cbeta) 就可以了；
3. 确定波动区间；
4. 制定策略细节（做多谁，做空谁）。